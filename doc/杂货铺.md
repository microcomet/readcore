### ID设计

使用24字节，分四段，设计为支持三级目录的书籍

```tex
FF FF FF FF    FF FF    FF FF    FF FF FF FF

从左至右，依次说明如下：

第一段四个字节（即一个INT类型），表示书籍ID

第二段两个字节（即一个SHORT INT类型），表示第一级章节ID

第三段两个字节（即一个SHORT INT类型），表示第二级章节ID，如果书籍本身只有两级目录，那么该段填0

第四段四个字节（即一个INT类型），表示最底层的章节ID，该类章节中含有具体的书籍内容
```



### 数据库

#### mysql版本

>  mysql-5.7.23-linux-glibc2.12-x86_64.tar

#### 下载地址

>  https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-5.7.23-linux-glibc2.12-x86_64.tar

#### 服务器IP

> 118.24.29.109

#### 登陆

> SSH 22  root/FWfw1234#

#### 安装

> 准备：
>
> ```shell
> cd /home
> mkdir software
> cd software
> wget https://cdn.mysql.com//Downloads/MySQL-5.7/mysql-5.7.23-linux-glibc2.12-x86_64.tar
> tar -xvf mysql-5.7.23-linux-glibc2.12-x86_64.tar
> tar -xvf mysql-5.7.23-linux-glibc2.12-x86_64.tar.gz
> ln -s mysql-5.7.23-linux-glibc2.12-x86_64 mysql
> 
> groupadd mysql
> useradd -r -g mysql -s /bin/false mysql
> 
> cd /home
> mkdir data
> cd data
> mkdir mysql
> chown mysql mysql
> chgrp mysql mysql
> cd mysql
> touch mariadb.log
> chown mysql mariadb.log
> chgrp mysql mariadb.log
> cd ..
> chmod 750 mysql
> 
> ```
>
> 修改Mysql配置文件my.cnf
>
> 1. 将datadir、socket、log-error、pid-file的配置都指向 /home/data/mysql 目录
> 2. 修改软件目录的owner和group：
>
> ```shell
> cd /home/software
> chown -R mysql mysql
> chown -R mysql mysql-5.7.23-linux-glibc2.12-x86_64
> chgrp -R mysql mysql
> chgrp -R mysql mysql-5.7.23-linux-glibc2.12-x86_64
> ```
>
> 初始化
>
> ```
> cd /home/software/mysql
> ./bin/mysqld --initialize --user=mysql 
> ```
>
> 报错
>
> > 问题：
> >
> > ```
> > ./bin/mysqld: error while loading shared libraries: libnuma.so.1: cannot open shared object file: No such file or directory
> > ```
> >
> > 解决：
> >
> > ```
> > yum install numactl
> > ```
> >
> > 问题：
> >
> > ```
> > [Warning] TIMESTAMP with implicit DEFAULT value is deprecated.
> > ```
> >
> > 解决：
> >
> > ```
> > https://blog.csdn.net/lzwglory/article/details/54808788
> > 
> > 要关闭警告，需要加入下面的参数：
> > 
> > [mysqld]
> > explicit_defaults_for_timestamp=true
> > ```
> >
> > 问题：
> >
> > ```
> > [ERROR] Can't find error-message file '/usr/local/mysql/share/errmsg.sys'.
> > ```
> >
> > 解决：
> >
> > ```
> > [mysqld]
> > language=/home/software/mysql/share/english
> > ```
>
> 初始化完成
>
> ```
> root@localhost: oh3YrlkZo<lx
> ```

#### 运行

```shell
/home/software/mysql/bin/mysqld_safe --user=mysql &
/home/software/mysql/bin/mysql -S /home/data/mysql/mysql.sock -u root -p 'QAZ!@#wsx'

set password for root@localhost = password('QAZ!@#wsx');
```





